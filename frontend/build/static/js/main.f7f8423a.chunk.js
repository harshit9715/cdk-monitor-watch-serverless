(this["webpackJsonpreact-image-upload-preview"]=this["webpackJsonpreact-image-upload-preview"]||[]).push([[0],{25:function(e,t,a){},26:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(2),r=a.n(n),c=a(15),i=a.n(c),l=(a(25),a(26),a(27),a(4)),o=a(5),u=a(3),d=a(19),p=a(18),j=a(16),m=a.n(j).a.create({baseURL:"https://yp0n4ur8o7.execute-api.us-east-2.amazonaws.com",headers:{"Content-type":"application/json"}}),b=new(function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,[{key:"upload",value:function(e,t){var a=new FormData;return a.append("file",e),m.post("/upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}},{key:"getFiles",value:function(){return m.get("/files")}}]),e}()),h=a(17),g=a.n(h),f=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).selectFile=s.selectFile.bind(Object(u.a)(s)),s.upload=s.upload.bind(Object(u.a)(s)),s.state={currentFile:void 0,previewImage:void 0,progress:0,message:"",imageInfos:[]},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.getFiles().then((function(t){console.log(t.data),e.setState({imageInfos:t.data})}))}},{key:"selectFile",value:function(e){this.setState({currentFile:e.target.files[0],previewImage:URL.createObjectURL(e.target.files[0]),progress:0,message:""})}},{key:"upload",value:function(){var e=this;this.setState({progress:0}),b.upload(this.state.currentFile,(function(t){e.setState({progress:Math.round(100*t.loaded/t.total)})})).then((function(t){return e.setState({message:t.data.message}),b.getFiles()})).then((function(t){e.setState({imageInfos:t.data})})).catch((function(t){console.error(t),e.setState({progress:0,message:"Could not upload the image!",currentFile:void 0})}))}},{key:"render",value:function(){var e=this.state,t=e.currentFile,a=e.previewImage,n=e.progress,r=e.message,c=e.imageInfos;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-8",children:Object(s.jsx)("label",{className:"btn btn-default p-0",children:Object(s.jsx)("input",{type:"file",accept:"image/*",onChange:this.selectFile})})}),Object(s.jsx)("div",{className:"col-4",children:Object(s.jsx)("button",{className:"btn btn-success btn-sm",disabled:!t,onClick:this.upload,children:"Upload"})})]}),t&&Object(s.jsx)("div",{className:"progress my-3",children:Object(s.jsxs)("div",{className:"progress-bar progress-bar-info progress-bar-striped",role:"progressbar","aria-valuenow":n,"aria-valuemin":"0","aria-valuemax":"100",style:{width:n+"%"},children:[n,"%"]})}),a&&Object(s.jsx)("div",{children:Object(s.jsx)("img",{className:"preview",src:a,alt:""})}),r&&Object(s.jsx)("div",{className:"alert alert-secondary mt-3",role:"alert",children:r}),Object(s.jsxs)("div",{className:"card mt-3",children:[Object(s.jsx)("div",{className:"card-header",children:"List of Files"}),Object(s.jsx)("ul",{className:"list-group list-group-flush",children:c&&c.map((function(e,t){return Object(s.jsxs)("li",{className:"list-group-item",children:[Object(s.jsx)("a",{href:e.sk,children:Object(s.jsx)("img",{className:"preview",src:e.sk,alt:e.sk})}),Object(s.jsx)("text",{style:{flex:1,flexWrap:"wrap"},children:"".concat(e.labels.map((function(e){return g.a.uniq([e.Name].concat(e.Parents.map((function(e){return e.Name}))))})))})]},t)}))})]})]})}}]),a}(n.Component);var v=function(){return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("h3",{children:"React Image Upload with Preview"}),Object(s.jsx)("div",{className:"content",children:Object(s.jsx)(f,{})})]})},O=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,49)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(v,{})}),document.getElementById("root")),O()}},[[48,1,2]]]);
//# sourceMappingURL=main.f7f8423a.chunk.js.map